(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(10),c=n.n(i),o=n(11),s=n(217),l=n(201),d=n(202),p=n(197),u=n(110),x=n(5),j=n(203),b=n(69),f=n(219),h=n(2),m=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1),width:"90%"},shadow:{boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)",width:"50%",paddingTop:"15px",marginTop:"10px",overflow:"hidden scroll"}}})),O=Object(u.a)({palette:{primary:b.a}}),g=Object(x.a)((function(e){return{root:{color:e.palette.getContrastText("#000"),backgroundColor:b.a[500],borderRadius:"0px",width:"30%","&:hover":{backgroundColor:b.a[700]}}}}))(l.a),v=Object(x.a)((function(e){return{root:{color:e.palette.getContrastText("#fff"),backgroundColor:"#fff",border:"1px solid #cccdcd",borderRadius:"0px",width:"30%","&:hover":{backgroundColor:"ligthgrey"}}}}))(l.a);function y(e){var t=e.onIdSubmit,n=e.getUser,a=m(),i=Object(r.useRef)();return Object(h.jsx)(d.a,{className:a.shadow,children:Object(h.jsxs)("form",{className:a.root,onSubmit:function(e){e.preventDefault(),n(e.target.user.value),t(i.current.value)},autoComplete:"off",children:[Object(h.jsxs)(j.a,{theme:O,children:[Object(h.jsx)(s.a,{className:a.margin,label:"Id",variant:"standard",id:"mui-theme-provider-standard-input1",inputRef:i,required:!0}),Object(h.jsx)(s.a,{className:a.margin,label:"User Name",name:"user",defaultValue:"WhatsApp",variant:"standard",id:"mui-theme-provider-standard-input2"})]}),Object(h.jsx)(v,{onClick:function(){n("WhatsApp"),t(Object(f.a)())},className:a.margin,children:"Create Id"}),Object(h.jsx)(g,{type:"submit",className:a.margin,children:"Login"})]})})}function w(e,t){var n="whatsapp-clone-"+e,a=Object(r.useState)((function(){var e=localStorage.getItem(n);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),i=Object(o.a)(a,2),c=i[0],s=i[1];return Object(r.useEffect)((function(){localStorage.setItem(n,JSON.stringify(c))}),[n,c]),[c,s]}var C=n(204),k=n(163),E=n(206),S=n(222),D=n(207),N=n(208),M=n(216),I=n(220),B=n(210),T=n(211),z=n(70),F=n(212),R=n(107),L=n.n(R),G=n(68),A=n.n(G),W=n(36),H=n(205),P=n(213),q=n(214),U=n(105),J=n.n(U),V=n(104),Y=n.n(V),K=a.a.createContext();function Q(){return Object(r.useContext)(K)}function X(e){var t=e.children,n=w("contacts",[{id:"a",name:"userA"}]),r=Object(o.a)(n,2),a=r[0],i=r[1];return Object(h.jsx)(K.Provider,{value:{contacts:a,createContact:function(e,t){i((function(n){return n?[].concat(Object(W.a)(n),[{id:e,name:t}]):[{id:e,name:t}]}))}},children:t})}var Z=n(42),$=n(102),_=n.n($),ee=a.a.createContext();function te(e){var t=e.id,n=e.children,a=Object(r.useState)(),i=Object(o.a)(a,2),c=i[0],s=i[1];return Object(r.useEffect)((function(){var e=_()("https://limitless-escarpment-52108.herokuapp.com/",{transports:["websocket","polling","flashsocket"],query:{id:t}});return s(e),function(){return e.close()}}),[t]),Object(h.jsx)(ee.Provider,{value:c,children:n})}var ne=a.a.createContext();function re(){return Object(r.useContext)(ne)}function ae(e){var t=e.id,n=e.children,a=w("conversations",[{recipients:["a"],messages:[]}]),i=Object(o.a)(a,2),c=i[0],s=i[1],l=Object(r.useState)(0),d=Object(o.a)(l,2),p=d[0],u=d[1],x=Q().contacts,j=Object(r.useContext)(ee);var b=c.map((function(e,n){var r=e.recipients.map((function(e){var t=x.find((function(t){return t.id===e})),n=t&&t.name||e;return{id:e,name:n}})),a=e.messages.map((function(e){var n=x.find((function(t){return t.id===e.sender})),r=n&&n.name||e.sender,a=t===e.sender;return Object(Z.a)(Object(Z.a)({},e),{},{senderName:r,fromMe:a})})),i=n===p;return Object(Z.a)(Object(Z.a)({},e),{},{messages:a,recipients:r,selected:i,index:n})})),f=Object(r.useCallback)((function(e){var t=e.recipients,n=e.text,r=e.sender;s((function(e){var a=!1,i={sender:r,text:n},c=e.map((function(e){return n=e.recipients,r=t,n.length===r.length&&(n.sort(),r.sort(),n.every((function(e,t){return e===r[t]})))?(a=!0,Object(Z.a)(Object(Z.a)({},e),{},{messages:[].concat(Object(W.a)(e.messages),[i])})):e;var n,r}));return a?c:[].concat(Object(W.a)(e),[{recipients:t,messages:[i]}])}))}),[s]);Object(r.useEffect)((function(){if(null!=j)return j.on("receive-message",f),function(){return j.off("receive-message")}}),[j,f]);var m={conversations:b,selectedConversation:b[p],sendMessage:function(e,n){j.emit("send-message",{recipients:e,text:n}),f({recipients:e,text:n,sender:t})},selectConversationIndex:u,createConversation:function(e){s((function(t){return t?[].concat(Object(W.a)(t),[{recipients:e,messages:[]}]):[{recipients:e,messages:[]}]}))}};return Object(h.jsx)(ne.Provider,{value:m,children:n})}var ie=n(103),ce=n.n(ie);var oe=function(){return Object(h.jsx)(S.a,{children:Object(h.jsx)(ce.a,{})})},se=Object(p.a)({list:{width:448},menuButton:{position:"absolute",padding:"0px",marginTop:"50px",marginLeft:"0px"},appBar:{background:"#00BEA4",height:"108px"}});function le(e){var t=e.isOpen,n=e.close,a=se(),i=Q().contacts,c=Object(r.useState)([]),s=Object(o.a)(c,2),l=s[0],d=s[1],p=re().createConversation;function u(e){e.preventDefault(),p(l),d([]),n(!1)}var x=Object(h.jsx)("div",{className:a.list,style:{overflow:"hidden scroll",height:"100%"},children:Object(h.jsx)(C.a,{children:i&&Object(h.jsx)("form",{onSubmit:u,children:i.map((function(e){return Object(h.jsxs)(H.a,{children:[Object(h.jsxs)(k.a,{button:!0,onClick:function(){return t=e.id,void d((function(e){return e.includes(t)?e.filter((function(e){return t!==e})):[].concat(Object(W.a)(e),[t])}));var t},children:[Object(h.jsx)(E.a,{children:l.includes(e.id)?Object(h.jsx)(oe,{}):Object(h.jsx)(S.a,{})}),Object(h.jsx)(D.a,{primary:e.name})]}),Object(h.jsx)(N.a,{light:!0})]},e.id)}))})})});return Object(h.jsx)("div",{children:Object(h.jsxs)(I.a,{anchor:"left",open:t,variant:"persistent",elevation:"0",onClose:function(){n(!1)},children:[Object(h.jsx)(B.a,{position:"sticky",style:{boxShadow:"none",width:"".concat(448,"px")},children:Object(h.jsxs)(T.a,{variant:"dense",className:a.appBar,children:[Object(h.jsx)(F.a,{edge:"end",onClick:function(){d([]),n(!1)},className:a.menuButton,color:"inherit","aria-label":"menu",children:Object(h.jsx)(Y.a,{})}),Object(h.jsx)("span",{style:{marginLeft:"53px",marginTop:"48px",fontSize:"19px",fontWeight:"500",color:"#fff"},children:"Add group participants"})]})}),x,Object(h.jsx)(B.a,{position:"fixed",color:"inherit",style:{top:"auto",bottom:0,left:0,width:"".concat(448,"px"),padding:"10px",backgroundColor:"#EDEDED",boxShadow:"none",minHeight:"62px",maxHeight:"106px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.length>0&&Object(h.jsx)(P.a,{in:l.length>0,children:Object(h.jsx)(q.a,{size:"medium",style:{background:"#09E95F",color:"#ffffff",marginBottom:"22px",marginTop:"16px",boxShadow:"rgba(0, 0, 0, 0.4) 0px 1px 3px 0px"},onClick:u,children:Object(h.jsx)(J.a,{})})})})]})})}var de=n(111),pe=n(215);var ue=function(e){var t=e.anchorEl,n=e.setAnchorEl,r=e.setDrawerOpen,a=e.setModalOpen,i=function(){n(null)};return Object(h.jsxs)(de.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:[Object(h.jsx)(pe.a,{onClick:function(){i(),r(!0)},children:"New Group"}),Object(h.jsx)(pe.a,{onClick:function(){i(),a(!0)},children:"New Contact"}),Object(h.jsx)(pe.a,{onClick:function(){n(null),localStorage.clear(),window.location.reload()},children:"Logout"})]})},xe=(n(159),n(218)),je=n(209),be=n(106),fe=n.n(be),he=Object(u.a)({palette:{primary:b.a}}),me=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1),width:"100%"},box:{boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)",width:"50%",paddingTop:"15px",marginTop:"10px",overflow:"hidden scroll"}}})),Oe=Object(x.a)((function(e){return{root:{color:e.palette.getContrastText("#000"),backgroundColor:b.a[500],borderRadius:"0px",width:"30%","&:hover":{backgroundColor:b.a[700]}}}}))(l.a);var ge=function(e){var t=e.modalOpen,n=e.setModalOpen,a=Object(r.useRef)(),i=Object(r.useRef)(),c=me(),o=Q().createContact;return Object(h.jsx)(xe.a,{"aria-labelledby":"New contact modal","aria-describedby":"Modal to add new contact",open:t,onClose:function(){n(!1)},closeAfterTransition:!0,BackdropProps:{timeout:500},children:Object(h.jsx)(je.a,{in:t,children:Object(h.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(h.jsxs)("div",{style:{background:"#fff",boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)",height:"230px",width:"50%",paddingTop:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(F.a,{style:{position:"absolute",right:"24.7%",top:"30%"},onClick:function(){n(!1)},children:Object(h.jsx)(fe.a,{style:{fontSize:"15px"}})}),Object(h.jsxs)("form",{className:c.root,onSubmit:function(e){e.preventDefault(),o(a.current.value,i.current.value),n(!1)},autoComplete:"off",children:[Object(h.jsxs)(j.a,{theme:he,children:[Object(h.jsx)(s.a,{className:c.margin,label:"Id",variant:"outlined",id:"mui-theme-provider-standard-input1",autoFocus:"true",inputRef:a,required:!0}),Object(h.jsx)(s.a,{className:c.margin,label:"User Name",name:"user",variant:"outlined",id:"mui-theme-provider-standard-input2",inputRef:i,required:!0})]}),Object(h.jsx)(Oe,{type:"submit",className:c.margin,children:"Add new contact"})]})]})})})})},ve=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},appBar:{background:"#ECECED",height:"59px",paddingLeft:"16px",borderBottom:"1px solid #E0E0E0"},drawer:{width:448,flexShrink:0},drawerPaper:{width:448},menu:{boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)",background:"#fff",maxWidth:"190px",zIndex:1e4},menuButton:{position:"absolute",padding:"0px",marginTop:"17px",marginLeft:"calc(100% - 42px)"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)},scroll:{overflow:"hidden scroll",paddingRight:0,width:"100%"}}}));var ye=function(e){var t=e.id,n=e.username,a=ve(),i=Object(r.useState)(null),c=Object(o.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(!1),p=Object(o.a)(d,2),u=p[0],x=p[1],j=Object(r.useState)(!1),b=Object(o.a)(j,2),f=b[0],m=b[1],O=re(),g=O.conversations,v=O.selectConversationIndex,y=Object(h.jsx)(C.a,{style:{padding:0},children:g&&g.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)(k.a,{button:!0,onClick:function(){return v(t)},selected:e.selected&&{background:"#EBEBEB"},children:[Object(h.jsx)(E.a,{children:Object(h.jsx)(S.a,{children:Object(h.jsx)(A.a,{})})}),Object(h.jsx)(D.a,{primary:"Group "+(t+1),secondary:e.recipients.map((function(e){return e.name})).join(",").concat(",You")})]},t),Object(h.jsx)(N.a,{light:!0})]})}))});return Object(h.jsxs)("div",{className:a.root,children:[Object(h.jsx)(M.a,{}),Object(h.jsxs)(I.a,{className:a.drawer,variant:"permanent",classes:{paper:a.drawerPaper},anchor:"left",children:[Object(h.jsxs)(B.a,{position:"sticky",style:{boxShadow:"none",width:"".concat(448,"px "),height:"59px"},children:[Object(h.jsxs)(T.a,{variant:"dense",className:a.appBar,children:[Object(h.jsx)(S.a,{style:{marginLeft:0}}),Object(h.jsx)(z.a,{variant:"h6",color:"dark",style:{color:"#000",marginLeft:"30px"},children:n})]}),Object(h.jsx)(F.a,{edge:"end",onClick:function(e){l(e.currentTarget)},className:a.menuButton,color:"dark","aria-label":"menu",children:Object(h.jsx)(L.a,{})}),Object(h.jsx)(ue,{anchorEl:s,setAnchorEl:l,setDrawerOpen:m,setModalOpen:x})]}),Object(h.jsx)("div",{className:a.scroll,children:y}),Object(h.jsxs)(B.a,{position:"fixed",color:"inherit",style:{top:"auto",bottom:0,left:0,width:"448px",padding:"10px",backgroundColor:"#EDEDED",boxShadow:"none",height:"62px",display:"flex",justifyContent:"center",alignItems:"center",borderTop:"1px solid #E0E0E0",borderRight:"1px solid #E0E0E0"},children:["Your Id : ",t]})]}),Object(h.jsx)(ge,{modalOpen:u,setModalOpen:x}),Object(h.jsx)(le,{isOpen:f,close:m})]})},we=n(162),Ce=n(221),ke=n(108),Ee=n.n(ke),Se=n(109),De=n.n(Se);var Ne=function(e){return e.fromMe?Object(h.jsx)("span",{style:{position:"absolute",top:"-1px",right:"-8px"},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 13",width:"8",height:"13",children:[Object(h.jsx)("path",{opacity:".13",d:"M5.188 1H0v11.193l6.467-8.625C7.526 2.156 6.958 1 5.188 1z"}),Object(h.jsx)("path",{fill:"#DCF8C6",d:"M5.188 0H0v11.193l6.467-8.625C7.526 1.156 6.958 0 5.188 0z"})]})}):Object(h.jsx)("span",{style:{position:"absolute",top:"-1px",left:"-8px"},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 13",width:"8",height:"13",children:[Object(h.jsx)("path",{opacity:".13",d:"M1.533 3.568L8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z"}),Object(h.jsx)("path",{fill:"#FFFEFE",d:"M1.533 2.568L8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z"})]})})};var Me=function(){var e=re(),t=e.selectedConversation,n=e.sendMessage,a=Object(r.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]),i=Object(r.useState)(""),c=Object(o.a)(i,2),s=c[0],l=c[1];function d(e){e.preventDefault(),0!==s.trim().length&&n(t.recipients.map((function(e){return e.id})),s),l("")}return Object(h.jsxs)("div",{style:{marginLeft:"448px",height:"100vh",display:"flex",flexDirection:"column",flexGrow:"1"},children:[Object(h.jsx)(B.a,{position:"sticky",color:"inherit",style:{top:"auto",bottom:0,left:0,padding:"10px",backgroundColor:"#EDEDED",boxShadow:"none",maxHeight:"59px",display:"flex",justifyContent:"center",alignItems:"flex-start"},children:Object(h.jsxs)(k.a,{children:[Object(h.jsx)(E.a,{children:Object(h.jsx)(S.a,{children:Object(h.jsx)(A.a,{})})}),Object(h.jsx)(D.a,{primary:"Group "+(t.index+1),secondary:t.recipients.map((function(e){return e.name})).join(",").concat(",You")})]})}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column",flexGrow:"1",height:"100%",overflow:"auto",backgroundColor:"#E4DCD5",backgroundImage:"url('bg-chat-tile-light.svg')",backgroundSize:"540px",backgroundPosition:"0% 12%"},children:Object(h.jsx)("div",{style:{flexGrow:"1"},children:Object(h.jsx)("div",{style:{display:"flex",height:"100%",flexDirection:"column",flexGrow:"1",alignItems:"flex-start",justifyContent:"flex-end",padding:"2px 80px"},children:t.messages.map((function(e,n){return Object(h.jsx)("div",{ref:n===t.messages.length-1?a:null,style:{marginTop:"2px",marginBottom:"2px",display:"flex",flexDirection:"column",alignSelf:e.fromMe?"flex-end":"flex-start"},children:Object(h.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",maxWidth:"500px",overflowWrap:"anywhere",borderRadius:e.fromMe?"8px 0 8px 8px":"0 8px 8px 8px",boxShadow:"0 1px 0.5px rgba(0,0,0,.13)",marginBottom:"10px",padding:"6px 7px 8px 9px",backgroundColor:e.fromMe?"#DCF8C6":"#FFFEFE"},children:[Object(h.jsx)(Ne,{fromMe:e.fromMe}),e.text,Object(h.jsxs)("div",{style:{fontSize:"11px",opacity:"0.6",display:"flex",alignSelf:e.fromMe?"flex-end":"flex-start"},children:[e.fromMe?"You":e.senderName,e.fromMe&&Object(h.jsx)(Ee.a,{style:{fontSize:15,marginLeft:"3px"}})]})]})},n)}))})})}),Object(h.jsxs)(we.a,{component:"form",onSubmit:d,elevation:0,square:!0,style:{background:"#EDEDED",minHeight:"62px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",flexGrow:"1",padding:"7px 10px",witdh:"100%"},children:[Object(h.jsx)(Ce.a,{multiline:!0,rowsMax:5,value:s,onKeyUp:function(e){e.shiftKey||"Enter"!==e.code||d(e)},onChange:function(e){return l(e.target.value)},style:{borderRadius:"25px",background:"#fff",flexGrow:"1",margin:"2px 10px",padding:"12px 12px 12px"},placeholder:"Type a message",inputProps:{"aria-label":"Type a message"}}),Object(h.jsx)(F.a,{type:"submit",children:Object(h.jsx)(De.a,{})})]})]})};var Ie=function(e){var t=e.id,n=e.username,r=re().selectedConversation;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ye,{id:t,username:n}),r&&Object(h.jsx)(Me,{})]})};var Be=function(){var e=w("id",0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=w("user","whatsapp"),i=Object(o.a)(a,2),c=i[0],s=i[1],l=Object(h.jsx)(te,{id:n,children:Object(h.jsx)(X,{children:Object(h.jsx)(ae,{id:n,children:Object(h.jsx)(Ie,{id:n,username:c})})})});return Object(h.jsx)("div",{children:0!==n?l:Object(h.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(h.jsx)(y,{onIdSubmit:r,getUser:s})})})};c.a.render(Object(h.jsx)(Be,{}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.7b0c6e56.chunk.js.map